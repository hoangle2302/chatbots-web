# Enable rewrite engine
RewriteEngine On

# API health check
RewriteRule ^api/health$ api/health.php [L]

# API auth endpoints
RewriteRule ^api/auth/register$ api/auth.php?action=register [L]
RewriteRule ^api/auth/login$ api/auth.php?action=login [L]
RewriteRule ^api/auth/logout$ api/auth.php?action=logout [L]
RewriteRule ^api/auth/refresh$ api/auth.php?action=refresh [L]

# API admin endpoints
RewriteRule ^api/admin/(.*)$ api/admin.php [L]

# API chat endpoints
RewriteRule ^api/chat$ api/chat-simple.php [L]

# API documents endpoints
RewriteRule ^api/documents$ api/documents.php [L]

# Fallback to index.php for other routes
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php [QSA,L]